@import "tailwindcss";
@import "katex/dist/katex.min.css";

/* include utility classes in streamdown */
@source "../node_modules/streamdown/dist/index.js";

/* custom variant for setting dark mode programmatically */
@custom-variant dark (&:is(.dark, .dark *));

/* include plugins */
@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

/* define design tokens (light mode) */
:root {
  --background: hsl(0 0% 100%);
  --foreground: hsl(240 10% 3.9%);
  --card: hsl(0 0% 100%);
  --card-foreground: hsl(240 10% 3.9%);
  --popover: hsl(0 0% 100%);
  --popover-foreground: hsl(240 10% 3.9%);
  
  /* Molycure AI 品牌色 - 翡翠绿 */
  --primary: hsl(162 100% 42%); /* #00D084 */
  --primary-foreground: hsl(0 0% 100%);
  
  --secondary: hsl(240 4.8% 95.9%);
  --secondary-foreground: hsl(240 5.9% 10%);
  --muted: hsl(240 4.8% 95.9%);
  --muted-foreground: hsl(240 3.8% 46.1%);
  
  /* 浅绿色强调色 */
  --accent: hsl(162 100% 95%); /* #E8FFF5 */
  --accent-foreground: hsl(162 100% 25%);
  
  --destructive: hsl(0 84.2% 60.2%);
  --destructive-foreground: hsl(0 0% 98%);
  --border: hsl(240 5.9% 90%);
  --input: hsl(240 5.9% 90%);
  --ring: hsl(162 100% 42%);
  --chart-1: hsl(12 76% 61%);
  --chart-2: hsl(173 58% 39%);
  --chart-3: hsl(197 37% 24%);
  --chart-4: hsl(43 74% 66%);
  --chart-5: hsl(27 87% 67%);
  
  /* 侧边栏 - 深色主题 */
  --sidebar-background: hsl(180 50% 8%); /* 深绿色 */
  --sidebar-foreground: hsl(0 0% 95%);
  --sidebar-primary: hsl(162 100% 42%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(180 40% 12%);
  --sidebar-accent-foreground: hsl(0 0% 95%);
  --sidebar-border: hsl(180 40% 15%);
  --sidebar-ring: hsl(162 100% 42%);
  
  /* border radius unit - 增大圆角 */
  --radius: 1rem; /* 从 0.5rem 增加到 1rem */
  --sidebar: hsl(180 50% 8%);
  
  /* Molycure AI 自定义变量 */
  --molycure-green: hsl(162 100% 42%); /* #00D084 */
  --molycure-green-light: hsl(162 100% 95%); /* #E8FFF5 */
  --molycure-green-dark: hsl(180 50% 8%); /* #0a2f2f */
  --molycure-green-bright: hsl(162 100% 50%); /* #00FF9F */
}

/* define design tokens (dark mode) */
.dark {
  --background: hsl(240 10% 3.9%);
  --foreground: hsl(0 0% 98%);
  --card: hsl(240 10% 3.9%);
  --card-foreground: hsl(0 0% 98%);
  --popover: hsl(240 10% 3.9%);
  --popover-foreground: hsl(0 0% 98%);
  
  /* Molycure AI 品牌色 - 深色模式 */
  --primary: hsl(162 100% 42%);
  --primary-foreground: hsl(0 0% 100%);
  
  --secondary: hsl(240 3.7% 15.9%);
  --secondary-foreground: hsl(0 0% 98%);
  --muted: hsl(240 3.7% 15.9%);
  --muted-foreground: hsl(240 5% 64.9%);
  
  /* 深色模式下的强调色 */
  --accent: hsl(180 40% 12%);
  --accent-foreground: hsl(162 100% 70%);
  
  --destructive: hsl(0 62.8% 30.6%);
  --destructive-foreground: hsl(0 0% 98%);
  --border: hsl(240 3.7% 15.9%);
  --input: hsl(240 3.7% 15.9%);
  --ring: hsl(162 100% 42%);
  --chart-1: hsl(220 70% 50%);
  --chart-2: hsl(160 60% 45%);
  --chart-3: hsl(30 80% 55%);
  --chart-4: hsl(280 65% 60%);
  --chart-5: hsl(340 75% 55%);
  
  /* 侧边栏 - 深色主题 */
  --sidebar-background: hsl(180 50% 8%);
  --sidebar-foreground: hsl(0 0% 95%);
  --sidebar-primary: hsl(162 100% 42%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(180 40% 12%);
  --sidebar-accent-foreground: hsl(0 0% 95%);
  --sidebar-border: hsl(180 40% 15%);
  --sidebar-ring: hsl(162 100% 42%);
  --sidebar: hsl(180 50% 8%);
}

/* define theme */
@theme {
  --font-sans: var(--font-geist);
  --font-mono: var(--font-geist-mono);

  --breakpoint-toast-mobile: 600px;

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);

  --color-sidebar: var(--sidebar-background);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
  
  /* Molycure AI 自定义颜色 */
  --color-molycure-green: var(--molycure-green);
  --color-molycure-green-light: var(--molycure-green-light);
  --color-molycure-green-dark: var(--molycure-green-dark);
  --color-molycure-green-bright: var(--molycure-green-bright);
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

@utility text-balance {
  text-wrap: balance;
}

@utility -webkit-overflow-scrolling-touch {
  -webkit-overflow-scrolling: touch;
}

@utility touch-pan-y {
  touch-action: pan-y;
}

@utility overscroll-behavior-contain {
  overscroll-behavior: contain;
}

@layer utilities {
  :root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 214, 219, 220;
    --background-end-rgb: 255, 255, 255;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --foreground-rgb: 255, 255, 255;
      --background-start-rgb: 0, 0, 0;
      --background-end-rgb: 0, 0, 0;
    }
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    overflow-x: hidden;
    position: relative;
  }

  html {
    overflow-x: hidden;
  }
}

/* Molycure AI 自定义样式 */
@layer components {
  /* 卡片悬停效果 - askwizly 风格 */
  .card-hover {
    @apply transition-all duration-200 ease-in-out;
  }
  
  .card-hover:hover {
    @apply -translate-y-1 shadow-lg;
  }
  
  /* 主按钮样式 - 翡翠绿 */
  .btn-primary {
    @apply bg-primary text-primary-foreground rounded-xl px-6 py-3 font-medium;
    @apply transition-all duration-200 ease-in-out;
    @apply hover:brightness-110 hover:shadow-md;
  }
  
  /* 次按钮样式 - 透明边框 */
  .btn-secondary {
    @apply bg-transparent border-2 border-primary text-primary rounded-xl px-6 py-3 font-medium;
    @apply transition-all duration-200 ease-in-out;
    @apply hover:bg-primary hover:text-primary-foreground;
  }
  
  /* 消息卡片样式 */
  .message-card {
    @apply bg-accent rounded-2xl p-6 shadow-sm;
    @apply transition-all duration-200 ease-in-out;
  }
  
  /* 输入框聚焦效果 */
  .input-focus {
    @apply focus:ring-2 focus:ring-primary focus:border-primary;
    @apply transition-all duration-200 ease-in-out;
  }
  
  /* Hero 区域渐变背景 */
  .hero-gradient {
    background: linear-gradient(135deg, hsl(180 50% 8%) 0%, hsl(180 40% 15%) 100%);
  }
  
  /* 浅色卡片背景 */
  .card-light-green {
    @apply bg-accent/50 backdrop-blur-sm;
  }
}

.skeleton {
  * {
    pointer-events: none !important;
  }

  *[class^="text-"] {
    color: transparent;
    @apply rounded-md bg-foreground/20 select-none animate-pulse;
  }

  .skeleton-bg {
    @apply bg-foreground/10;
  }

  .skeleton-div {
    @apply bg-foreground/20 animate-pulse;
  }
}

.ProseMirror {
  outline: none;
}

.cm-editor,
.cm-gutters {
  @apply bg-background! dark:bg-zinc-800! outline-hidden! selection:bg-zinc-900!;
}

.ͼo.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground,
.ͼo.cm-selectionBackground,
.ͼo.cm-content::selection {
  @apply bg-zinc-200! dark:bg-zinc-900!;
}

.cm-activeLine,
.cm-activeLineGutter {
  @apply bg-transparent!;
}

.cm-activeLine {
  @apply rounded-r-sm!;
}

.cm-lineNumbers {
  @apply min-w-7;
}

.cm-foldGutter {
  @apply min-w-3;
}

.cm-lineNumbers .cm-activeLineGutter {
  @apply rounded-l-sm!;
}

.suggestion-highlight {
  @apply bg-blue-200 hover:bg-blue-300 dark:hover:bg-blue-400/50 dark:text-blue-50 dark:bg-blue-500/40;
}

/* minimal scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 3px;
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: --alpha(var(--muted-foreground) / 0.5);
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
